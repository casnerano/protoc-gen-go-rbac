// Code generated by protoc-gen-go-rbac. DO NOT EDIT.
// versions:
// - protoc-gen-go-grpc {{ .Meta.ModuleVersion }}
// - protoc             {{ .Meta.ProtocVersion }}
// source: {{ .File.Source }}

package {{ .File.Package }}

import (
    "github.com/casnerano/protoc-gen-go-rbac/pkg/rbac"
)

{{- range .Services }}
    var rbacService_{{ .Name }} = rbac.Service{
        Name: "{{ .Name }}",
        {{- if .Rules }}
            Rules: &rbac.Rules{
                AccessLevel: {{ .Rules.AccessLevel }},
                {{- if .Rules.AllowedRoles }}
                    AllowedRoles: []string{
                        {{- range $i, $role := .Rules.AllowedRoles }}
                        "{{ $role | toLower }}",
                        {{- end }}
                    },
                {{- end }}
            },
        {{- else }}
            Rules: nil,
        {{- end }}
        Methods: map[string]*rbac.Method{
            {{- range $name, $method := .Methods }}
            "{{ $name }}": {
                Rules: &rbac.Rules{
                    AccessLevel: {{ $method.Rules.AccessLevel }},
                    {{- if $method.Rules.AllowedRoles }}
                        AllowedRoles: []string{
                            {{- range $j, $role := $method.Rules.AllowedRoles }}
                            "{{ $role | toLower }}",
                            {{- end }}
                        },
                    {{- end }}
                },
            },
            {{- end }}
        },
    }

    func (Unimplemented{{ .Name }}Server) GetRBACService() *rbac.Service {
        return &rbacService_{{ .Name }}
    }
{{- end }}

